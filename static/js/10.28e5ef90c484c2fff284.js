webpackJsonp([10],{"3IqF":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("GKtG"),l=n("TIfe"),o={name:"cardVue",data:function(){return{list:null,listLoading:!0,multipleSelection:[],downloadLoading:!1,filename:"",count:0,current:1,fistId:""}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.listLoading=!0;var e={token:JSON.parse(Object(l.a)()).token,count:10};Object(a.a)(e).then(function(e){t.list=e.data.data,console.log(t.list),0!=t.list.length&&(t.fistId=t.list[0]._id),t.count=e.data.count,t.listLoading=!1})},handleSelectionChange:function(t){this.multipleSelection=t},handleDownload:function(){var t=this;this.multipleSelection.length?(this.downloadLoading=!0,n.e(15).then(n.bind(null,"zWO4")).then(function(e){var n=t.multipleSelection,a=t.formatJson(["name","workNum","officeNum","company","duty","location"],n);console.log(a),e.export_json_to_excel(["姓名","电话","座机","公司","职位","地址"],a,t.filename),t.$refs.multipleTable.clearSelection(),t.downloadLoading=!1})):this.$message({message:"Please select at least one item",type:"warning"})},formatJson:function(t,e){for(var n=[],a=0,l=e.length;a<l;a++){for(var o=[],i=0,c=t.length;i<c;i++){var r=e[a].local_data,s=t[i];for(var u in r)u==s&&o.push(r[u])}n.push(o)}return n},changeNum:function(t){this.listLoading=!0;var e=this,n=JSON.parse(Object(l.a)()),a=this.fistId;i(n.token,a,this.current-parseInt(t),function(n){e.list=n.data.data,e.count=n.data.count,e.listLoading=!1,e.current=t,e.fistId=e.list[0]._id})},prevClick:function(t){this.listLoading=!0;var e=this,n=JSON.parse(Object(l.a)()),a=this.fistId;i(n.token,a,this.current-parseInt(t),function(n){e.list=n.data.data,e.count=n.data.count,e.listLoading=!1,e.current=t,e.fistId=e.list[0]._id})},nextClick:function(t){this.listLoading=!0;var e=this,n=JSON.parse(Object(l.a)()),a=this.fistId;i(n.token,a,this.current-parseInt(t),function(n){e.list=n.data.data,e.count=n.data.count,e.listLoading=!1,e.current=t,e.fistId=e.list[0]._id})}}};function i(t,e,n,l){var o={token:t,count:10,_id:e,page:n};Object(a.b)(o).then(function(t){return l&&l(t)})}var c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-input",{staticStyle:{width:"340px"},attrs:{placeholder:"请输入导出文件名（默认名：excel-list）","prefix-icon":"el-icon-document"},model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}}),t._v(" "),n("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",icon:"document",loading:t.downloadLoading},on:{click:t.handleDownload}},[t._v("导出")]),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],ref:"multipleTable",attrs:{data:t.list,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.$index+1)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"姓名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",[t._v(t._s(e.row.local_data.name||"未知"))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"电话",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.local_data.workNum)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"座机",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.local_data.officeNum)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"公司"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.local_data.company)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"职位"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.local_data.duty)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"地址"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.local_data.location)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"详情"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("router-link",{attrs:{to:{name:"cardDetail",params:{data:t.row}}}},[n("el-button",{attrs:{type:"primary",loading:!1,icon:"el-icon-edit"}})],1)]}}])})],1),t._v(" "),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.count},on:{"current-change":t.changeNum,"prev-click":t.prevClick,"next-click":t.nextClick}})],1)},staticRenderFns:[]};var r=n("VU/8")(o,c,!1,function(t){n("xZyY")},"data-v-64dcf456",null);e.default=r.exports},"4PSy":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.el-pagination[data-v-64dcf456] {\n  text-align: center;\n  padding: 15px 0;\n}\n",""])},xZyY:function(t,e,n){var a=n("4PSy");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("09e0e6a5",a,!0)}});